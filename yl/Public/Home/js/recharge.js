/*! YaoDian v1.5.0 2016/11/10 15:00 | (c) Yowant FED Team */
YD_recharge=function(){},YD_recharge.prototype={op:function(a){this.maxNum=a||99999,$(".popup-close").on("click",function(){$(".popup-bg,.popup-box").hide(),$("#payPassword").removeClass("disabled")})},getHistory:function(){var a=$("#latelylist").data("apiurl");$.ajax({url:a,type:"GET",async:!1,dataType:"json",cache:!1,data:{},success:function(a){var t=a.data,e="";1===a.status&&($.each(t,function(a){var s="",i="";void 0!==t[a].discount&&(s=' data-discount="'+t[a].discount+'"'),void 0!==t[a].discountcoin&&(i=' data-discountcoin="'+t[a].discountcoin+'"'),e+="<li>"+t[a].name+'<input type="hidden" data-gamename="'+t[a].name+'" '+s+i+' id="'+t[a].id+'" value="'+t[a].id+'" name="id"></li>'}),$("#latelylist").html(e))}})},baiduCoupon:function(){function a(t,e){var o=$(".J-selectGame").data("game-api");return""===o?($.xbox.tips("API 配置错误"),!1):void $.ajax({url:o,type:"GET",async:!1,dataType:"html",cache:!1,data:{pageIndex:t,name:e},success:function(o){$(".choose-box").html(o),$(".gamelist-list").on("click",".gameone-one",function(){s=$(this).find("input").val(),i=$(this).find("input").data("gamename"),$("#gameName").val(i),$(this).addClass("cur").siblings().removeClass("cur"),$("#gameName").val(i),$("#gid").val(s),$("#customMoney").keyup(),$(".popup-bg,.popup-choose-game").hide()}),$("#searchBtn").unbind("click"),$("#searchBtn").bind("click",function(){t=1,e=$("#searchVal").val(),a(t,e)}),$(".recharge-page a").unbind("click"),$(".recharge-page a").bind("click",function(){t=parseInt($(this).data("page")),$(".recharge-page a").removeClass("cur_page_num"),$(this).addClass("cur_page_num"),a(t,e)}),$("#choose-history").on("click","li",function(){var a=$(this).find("input").val(),t=$(this).find("input").data("gamename");$("#gid").val(a),$("#gameName").val(t),$(".popup-bg,.popup-choose-game").hide()})}})}var t=1,e="",s=0,i="",o=this;$(".J-selectGame").on("click",function(){$("#searchVal").val(""),$(".popup-bg,.popup-choose-game").show(),s=0,a(t,e)}),$("#gameName").on("click",function(){$(".J-selectGame").click()}),$("#latelylist").on("click","li",function(){s=$(this).find("input").val(),i=$(this).find("input").data("gamename"),$("#gid").val(s),$("#gameName").val(i),$("#customMoney").keyup()}),$(".recharge-sum dd").on("click",function(){var a=parseFloat($("#ydBalance").val()),t=parseFloat($(this).data("numval"));return t<=a?($("#customMoney").val("").removeClass("cur"),$(this).addClass("cur").siblings().removeClass("cur"),$("#rechargeSum").val(t),$("#customMoney").val(t),$("#yaodianNeed").html(t),void 0):($.xbox.tips("支付金额不能大于遥点余额！"),!1)}),$("#customMoney").keyup(function(){var a=parseInt($(this).val(),10);$(this).val(isNaN(a)?0:a);var t=parseFloat($(this).val()),e=parseFloat($("#ydBalance").val());if(t>e?($.xbox.tips("支付金额不能大于遥点余额！"),$(this).val(e)):t>o.maxNum&&($.xbox.tips("允许最大充值金额："+o.maxNum),$(this).val(o.maxNum)),""!==t){$(".recharge-sum dd").removeClass("cur");var s=$(this).val();$("#rechargeSum").val(s),$("#yaodianNeed").html(s)}}),$("#customMoney").focus(function(){$(".recharge-sum dd").removeClass("cur"),$(this).addClass("cur")}),$(".J_Status").on("click",function(){$(".J_Status").find(".recharge-radio").removeClass("cur"),$(this).find(".recharge-radio").addClass("cur"),$(this).find("input")[0].checked=!0}),$("#goPay").on("click",function(){var a=$.trim($("#rechargeSum").val()),t=$.trim($("#gameName").val()),e=$.trim($("#gameAccounts").val()),s=$.trim($("#expiryDate").val());""===t?$.xbox.tips("请选择游戏"):""===e?$.xbox.tips("请输入要充值的游戏帐号"):""===s?$.xbox.tips("请输入代金券的有效期限"):""===a?$.xbox.tips("请输入充值金额"):""!==a&&parseFloat(a)<=0?$.xbox.tips("请输入大于0的金额"):parseFloat($("#ydBalance").val())<parseFloat(a)?$.xbox.tips("遥点余额不足!"):$(".popup-bg,.popup-pay-password").show()}),$(".popup-pay-password").on("click","#chooseCancel",function(){$(".popup-bg,.popup-box").hide(),$("#J-payPassword").val(""),$("#payPassword").removeClass("disabled")}),$("#payPassword").on("click",function(){if($(this).hasClass("disabled"))return!1;var a=$("#passwordVal").val();if(""===a)return $.xbox.tips("请输入支付密码"),!1;$("#baiduCoupon").data("apiurl"),$("#goPay").data("title"),$("#goPay").data("status");$(this).addClass("disabled"),$("#J-payPassword").val($.md5(a)),$("#baiduCoupon").submit()})},baiduKubi:function(){function a(t,e){var o=$(".J-selectGame").data("game-api");return""===o?($.xbox.tips("API 配置错误"),!1):void $.ajax({url:o,type:"get",async:!1,dataType:"html",cache:!1,data:{pageIndex:t,name:e},success:function(o){$(".choose-box").html(o),$(".gamelist-list").on("click",".gameone-one",function(){if(s=$(this).find("input").val(),i=$(this).find("input").data("gamename"),$("#gameName").val(i),n=$(this).find("input").data("discount"),r=$(this).find("input").data("discountcoin"),$(this).addClass("cur").siblings().removeClass("cur"),0===s)return $.xbox.tips("请选择游戏"),!1;var a=parseInt($("#J-isEnter").val()),t=parseFloat($("#J-userdiscount").val());t>0?$("#discount").val(t):a?$("#discount").val(r):$("#discount").val(n),$("#gameName").val(i),$("#gid").val(s),$("#customMoney").keyup(),$(".popup-bg,.popup-choose-game").hide()}),$("#searchBtn").unbind("click"),$("#searchBtn").bind("click",function(){t=1,e=$("#searchVal").val(),a(t,e)}),$(".recharge-page a").unbind("click"),$(".recharge-page a").bind("click",function(){t=parseInt($(this).data("page")),$(".recharge-page a").removeClass("cur_page_num"),$(this).addClass("cur_page_num"),a(t,e)})}})}var t=1,e="",s=0,i="",o=this,n=10,r=10;$(".J-selectGame").on("click",function(){$("#searchVal").val(""),$(".popup-bg,.popup-choose-game").show(),s=0,a(t,e)}),$("#gameName").on("click",function(){$(".J-selectGame").click()}),$("#latelylist").on("click","li",function(){s=$(this).find("input").val(),i=$(this).find("input").data("gamename");var a=$(this).find("input").data("discount"),t=$(this).find("input").data("discountcoin"),e=parseInt($("#J-isEnter").val()),o=parseFloat($("#J-userdiscount").val());o>0?$("#discount").val(o):e?$("#discount").val(t):$("#discount").val(a),$("#gid").val(s),$("#gameName").val(i),$("#customMoney").keyup()}),$(".recharge-sum dd").on("click",function(){if(""===$("#gameName").val())return $.xbox.tips("请先选择游戏"),!1;n=parseFloat($("#discount").val());var a=parseFloat($("#ydBalance").val()),t=parseFloat($(this).data("numval")),e=parseFloat(t*n/10).toFixed(2);return e<=a?($("#customMoney").val("").removeClass("cur"),$(this).addClass("cur").siblings().removeClass("cur"),$("#rechargeSum").val(t),$("#customMoney").val(t),$("#yaodianNeed").html(e),$("#J-yaodianNeed").val(e),void 0):($.xbox.tips("支付金额不能大于遥点余额！"),!1)}),$("#customMoney").keyup(function(){if(""===$("#gameName").val())return $.xbox.tips("请先选择游戏"),$(this).val(0),!1;var a=parseInt($(this).val(),10);$(this).val(isNaN(a)?0:a);var t=parseFloat($("#discount").val()),e=parseFloat($(this).val()),s=parseFloat($("#ydBalance").val()),i=parseFloat(e*t/10).toFixed(2);if(i>s?($.xbox.tips("支付金额不能大于遥点余额！"),$(this).val(0),$("#yaodianNeed").html("0")):e>o.maxNum&&($.xbox.tips("允许最大充值金额："+o.maxNum),$(this).val(o.maxNum)),""!==e){$(".recharge-sum dd").removeClass("cur");var n=$(this).val();$("#rechargeSum").val(n),$("#yaodianNeed").html(i),$("#J-yaodianNeed").val(i)}}),$("#customMoney").focus(function(){$(".recharge-sum dd").removeClass("cur"),$(this).addClass("cur")}),$(".J_Status").on("click",function(){$(".J_Status").find(".recharge-radio").removeClass("cur"),$(this).find(".recharge-radio").addClass("cur"),$(this).find("input")[0].checked=!0}),$("#goPay").on("click",function(){var a=$.trim($("#rechargeSum").val()),t=$.trim($("#gameName").val()),e=$.trim($("#gameAccounts").val());return""===t?($.xbox.tips("请选择游戏"),!1):""===e?($.xbox.tips("请输入要充值的游戏帐号"),!1):""===a?($.xbox.tips("请选择充值金额"),!1):""!==a&&parseFloat(a)<=0?($.xbox.tips("请输入大于0的金额"),!1):void $(".popup-bg,.popup-pay-password").show()}),$(".popup-pay-password").on("click","#chooseCancel",function(){$(".popup-bg,.popup-box").hide(),$("#payPassword").removeClass("disabled")}),$("#payPassword").on("click",function(){var a=$("#passwordVal").val();if($(this).hasClass("disabled"))return!1;if(""===a)return $.xbox.tips("请输入支付密码"),!1;$("#baiduCoupon").data("apiurl"),$("#goPay").data("title"),$("#goPay").data("status");$("#J-payPassword").val($.md5(a)),$(this).addClass("disabled"),$("#baiduCoupon").submit()})},recharge360Bi:function(){var a=this;$("#latelylist").on("click","li",function(){gameName=$(this).find("input").data("gamename"),$("#accounts360").val(gameName),$("#customMoney").keyup()}),$(".recharge-sum dd").on("click",function(){a._cardMoney($(this),!1)}),$("#customMoney").keyup(function(){a._customMoney($(this),!1)}),$("#customMoney").focus(function(){$(".recharge-sum dd").removeClass("cur"),$(this).addClass("cur")}),$("#goPay").on("click",function(){var t=$.trim($("#rechargeSum").val()),e=$.trim($("#accounts360").val()),s=$.trim($("#password360").val());""===e?$.xbox.tips("请输入360平台账号"):""===s?$.xbox.tips("请输入360平台密码"):""===t?$.xbox.tips("请选择充值金额"):""!==t&&parseFloat(t)<=0?$.xbox.tips("请选择大于0的金额"):(a._cardMoney($(".recharge-sum dd.cur"),!1),$(".popup-bg,.popup-pay-password").show())}),$("#payPassword").on("click",function(){var a=$("#passwordVal").val();if($(this).hasClass("disabled"))return!1;if(""===a)return $.xbox.tips("请输入支付密码"),!1;$("#recharge360bi").data("apiurl"),$("#goPay").data("title"),$("#goPay").data("status");$("#J-payPassword").val($.md5(a)),$(this).addClass("disabled"),$("#recharge360bi").submit()}),$(".popup-pay-password").on("click","#chooseCancel",function(){$(".popup-bg,.popup-box").hide(),$("#payPassword").removeClass("disabled")})},modou:function(){function a(t,e){var o=$(".J-selectGame").data("game-api");return""===o?($.xbox.tips("API 配置错误"),!1):void $.ajax({url:o,type:"GET",async:!1,dataType:"html",cache:!1,data:{pageIndex:t,name:e},success:function(o){$(".choose-box").html(o),$(".gamelist-list").on("click",".gameone-one",function(){return s=$(this).find("input").val(),i=$(this).find("input").data("gamename"),n=$(this).find("input").data("discount"),r=parseFloat($("#J-userdiscount").val()),$("#gameName").val(i),$(this).addClass("cur").siblings().removeClass("cur"),0===s?($.xbox.tips("请选择游戏"),!1):($("#gameName").val(i),$("#gid").val(s),r>0?$("#discount").val(r):$("#discount").val(n),$("#customMoney").keyup(),$(".popup-bg,.popup-choose-game").hide(),void 0)}),$("#searchBtn").unbind("click"),$("#searchBtn").bind("click",function(){t=1,e=$("#searchVal").val(),a(t,e)}),$(".recharge-page a").unbind("click"),$(".recharge-page a").bind("click",function(){t=parseInt($(this).data("page")),$(".recharge-page a").removeClass("cur_page_num"),$(this).addClass("cur_page_num"),a(t,e)})}})}var t=1,e="",s=0,i="",o=this,n=10,r=10;$(".J-selectGame").on("click",function(){$("#searchVal").val(""),$(".popup-bg,.popup-choose-game").show(),s=0,a(t,e)}),$("#gameName").on("click",function(){$(".J-selectGame").click()}),$("#latelylist").on("click","li",function(){s=$(this).find("input").val(),i=$(this).find("input").data("gamename"),n=$(this).find("input").data("discount"),r=parseFloat($("#J-userdiscount").val()),$("#gid").val(s),$("#gameName").val(i),r>0?$("#discount").val(r):$("#discount").val(n),$("#customMoney").keyup()}),$(".recharge-sum dd").on("click",function(){return""===$("#gameName").val()?($.xbox.tips("请先选择游戏"),$(this).val(0),!1):void o._cardMoney($(this),!0)}),$("#customMoney").keyup(function(){return""===$("#gameName").val()?($.xbox.tips("请先选择游戏"),$(this).val(0),!1):void o._customMoney($(this),!0)}),$("#customMoney").focus(function(){$(".recharge-sum dd").removeClass("cur"),$(this).addClass("cur")}),$("#goPay").on("click",function(){var a=$.trim($("#rechargeSum").val()),t=$.trim($("#gameName").val()),e=$.trim($("#gameAccounts").val());if(""===t)return $.xbox.tips("请选择游戏"),!1;if(""===e)return $.xbox.tips("请输入要充值的游戏帐号"),!1;if(""===a)return $.xbox.tips("请选择充值金额"),!1;if(""!==a&&parseFloat(a)<=0)return $.xbox.tips("请输入大于0的金额"),!1;var s=parseFloat($("#ydBalance").val()),i=parseFloat($("#rechargeSum").val());return i>s?($.xbox.tips("支付金额不能大于遥点余额！"),!1):void $(".popup-bg,.popup-pay-password").show()}),$(".popup-pay-password").on("click","#chooseCancel",function(){$(".popup-bg,.popup-box").hide(),$("#payPassword").removeClass("disabled")}),$("#payPassword").on("click",function(){var a=$("#passwordVal").val();if($(this).hasClass("disabled"))return!1;if(""===a)return $.xbox.tips("请输入支付密码"),!1;$("#baiduCoupon").data("apiurl"),$("#goPay").data("title"),$("#goPay").data("status");$("#J-payPassword").val($.md5(a)),$(this).addClass("disabled"),$("#baiduCoupon").submit()})},rechargeBatch:function(){$("#batchBtn").on("click",function(){""===$(".showFileName").html()?$.xbox.tips("请上传excel表格"):($(".popup-bg,.popup-pay-password").show(),$("#payPassword").on("click",function(){var a=$.trim($("#passwordVal").val());if($(this).hasClass("disabled"))return!1;if(""===a)return $.xbox.tips("请输入支付密码"),!1;$("#batchForm").data("apiurl"),$("#batchBtn").data("title"),$("#batchBtn").data("status");$(this).addClass("disabled"),$("#J-payPassword").val($.md5(a)),$("#batchForm").submit()}))}),$(".popup-pay-password").on("click","#chooseCancel",function(){$("#payPassword").removeClass("disabled"),$(".popup-bg,.popup-box").hide()})},onlinePay:function(){var a=5e4;$(".recharge-sum dd").on("click",function(){$(this).addClass("cur").siblings().removeClass("cur");var a=$(this).data("numval"),t=$.trim($("#discount").val()),e=(a*(t/10)).toFixed(2);$("#payMoney").val(e),$("#rechargeNeedpay").html(e),$("#rechargePoint").html(a),$("#customMoney").val(a).removeClass("cur"),$("#rechargeSum").val(a)}),$("#customMoney").keyup(function(){var t=parseInt($(this).val(),10);$(this).val(isNaN(t)?0:t),$(".recharge-sum dd").removeClass("cur");var e=$(this).val(),s=$("#discount").val(),i=(e*(s/10)).toFixed(2),o=(e*(s/10)).toFixed(2);return parseFloat(o)>a?($("#payMoney").val(0),$("#customMoney").val(0),$("#rechargeNeedpay").html("0.00"),$("#rechargePoint").html("0.00"),$("#rechargeSum").val(0),$.xbox.tips("充值金额最大仅限￥50000，一次性充值超出￥50000，请走汇款通道."),!1):($("#payMoney").val(o),$("#rechargeNeedpay").html(i),$("#rechargePoint").html(e),void $("#rechargeSum").val(e))}),$("#customMoney").focus(function(){$(".recharge-sum dd").removeClass("cur"),$(this).addClass("cur")}),$(".bank-list").on("click",".bank-one",function(){var a=$(this).data("bankid");$(this).addClass("cur").siblings().removeClass("cur"),$("#payBank").val(a)}),$(".bank-more").on("click",function(){$(".bank-list").toggleClass("morebank"),$(this).toggleClass("cur"),YW_Global&&YW_Global.initPage()}),$("#goPay").on("click",function(){var a=$("#payMoney").val(),t=$(this).data("title"),e=$(this).data("text"),s=$(this).data("linkurl"),i=$(this).data("status"),o=$("#rechargeSum").val();return""===o?($.xbox.tips("请选择充值金额"),!1):""!==o&&parseFloat(o)<=0?($.xbox.tips("请选择大于0的金额"),!1):parseFloat(a)>5e4?(showBankPay(t,e,s,i),!1):""===$("#payBank").val()?($.xbox.tips("请选择支付方式"),!1):($("#onlinePay").submit(),void $(".popup-bg,.popup-status-main").show())}),$(document).on("click","#bankpaySure",function(){$("#showStatus").removeClass("isshow"),window.open($("#goPay").data("linkurl"))})},bankPay:function(){$(".uploadfile").on("change","input[type='file']",function(){var a=$(this).val();if(a.indexOf("jpg")==-1&&a.indexOf("png")==-1)return $("#idCard1").val("您未上传文件，或者您上传文件类型有误！"),!1;var t=a.split("\\"),e=t[t.length-1];$("#idCard1").val(e)}),$("#remitMoney").keyup(function(){var a=parseFloat($(this).val()),t=isNaN(a)?0:a;$(this).val(t)}),$("#bankAccount").keyup(function(a){$(this).val($(this).val().replace(/\D/g,""))}),$("#goPay").on("click",function(){var a=new YD_common,t=$("#telPhone").val(),e=a.isMPhone(t),s=($(this).data("title"),$(this).data("text"),$(this).data("linkurl"),$(this).data("status"),$.trim($("#remitMoney").val())),i=$.trim($("#bankAccount").val()),o=$.trim($("#remitName").val()),n=/[\d]{8,20}/;return""===o?($.xbox.tips("请输入汇款人姓名"),!1):o.length<2||o.length>30?($.xbox.tips("请输入正确的汇款人姓名"),!1):e?""===i?($.xbox.tips("请输入汇款银行账号"),!1):n.test(i)?""===s?($.xbox.tips("请输入汇款金额"),!1):""!==s&&parseFloat(s)<=0?($.xbox.tips("请选择大于0的金额"),!1):""===$("#idCard1_src").val()||"您未上传文件，或者您上传文件类型有误！"===$("#idCard1_src").val()?($.xbox.tips("请上传汇款凭证"),!1):void $("#bankPay").submit():($.xbox.tips("请输入正确的汇款银行账号"),!1):($.xbox.tips("请输入正确的手机号码"),!1)}),$(document).on("click","#bankpaySure",function(){$("#showStatus").removeClass("isshow")})},checkFileType:function(a){var t=a.name,e=t.substring(t.lastIndexOf("."),t.length).toLowerCase(),s=!0;return".jpg"!=e&&".png"!=e&&".jpeg"!=e&&".gif"!=e&&(s=!1),s},upload:function(a,t,e){var s=this,i=e||"",o=$.trim($("#"+a).data("apiurl"));""!==o&&void 0!==o||$.xbox.tips("上传接口配置错误");var n=new plupload.Uploader({runtimes:"html5,html4",browse_button:a,dragdrop:!1,auto_start:!0,multi_selection:!1,url:o,flash_swf_url:BASE_PATH+"static/js/upload/Moxie.swf",filter:{max_file_size:s.MAX_UPLOAD,mime_types:[{title:"图片文件",extensions:"jpg,png,jpeg"}]},init:{Init:function(){""!==i?$("#"+a).text(i):$("#"+a).text("上传")},getInit:function(){},FilesAdded:function(a,t){plupload.each(t,function(t){return s.checkFileType(t)?(a.start(),!1):(a.removeFile(t),void $.xbox.tips("图片格式错误"))})},UploadProgress:function(a,t){},FileUploaded:function(a,e,s){var i=$.parseJSON(s.response);if(0===i.status)return $.xbox.tips(i.failed),!1;switch(t){case"idCardz":$("#upPic01").attr("src",i.url),$("#upPic01_val").val(i.url),$.xbox.tips("上传成功");break;case"idCard1":$("#idCard1").attr("src",i.url),$("#idCard1_src").val(i.url),$("#idCard1_src").next(".tips-r").show().removeClass("error").find("em").html(""),$.xbox.tips("上传成功");break;case"idCard2":$("#idCard2").attr("src",i.url),$("#idCard2_src").val(i.url),$("#idCard2_src").next(".tips-r").show().removeClass("error").find("em").html(""),$.xbox.tips("上传成功");break;default:$.xbox.tips("上传成功")}},Error:function(a,t){$.xbox.tips("上传失败")}}});n.init()},_customMoney:function(a,t){var e=this,s=parseInt(a.val(),10);a.val(isNaN(s)?0:s);var i=parseFloat(a.val()),o=parseFloat($("#ydBalance").val()),n=parseFloat($("#discount").val());n=t?n/10:n;var r=(i*n).toFixed(2);if(r>o?($.xbox.tips("支付金额不能大于遥点余额！"),a.val(o)):r>e.maxNum&&($.xbox.tips("允许最大充值金额："+e.maxNum),a.val(e.maxNum)),""!==i){$(".recharge-sum dd").removeClass("cur");var l=parseFloat(a.val());r=(l*n).toFixed(2),$("#rechargeSum").val(r),$("#yaodianNeed").html(r)}},_cardMoney:function(a,t){var e=parseFloat($("#ydBalance").val()),s=parseFloat(a.data("numval")),i=parseFloat($("#discount").val());i=t?i/10:i;var o=(s*i).toFixed(2);return o<=e?($("#customMoney").val("").removeClass("cur"),a.addClass("cur").siblings().removeClass("cur"),$("#cardId").val(s),$("#customMoney").val(s),$("#rechargeSum").val(o),$("#yaodianNeed").html(o),void 0):($.xbox.tips("支付金额不能大于遥点余额！"),!1)}};